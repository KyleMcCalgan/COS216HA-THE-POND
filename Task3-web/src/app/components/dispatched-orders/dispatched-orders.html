<div class="dispatched-orders-container">
  <h2>Dispatched Orders</h2>
  
  <!-- Show loading indicator -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading orders...</p>
  </div>
  
  <!-- Show error message if failed to load -->
  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
    <button (click)="fetchOrders()">Try Again</button>
  </div>
  
  <!-- Show orders or empty state -->
  <div *ngIf="!loading && !error" class="orders-list">
    <!-- Empty state -->
    <div *ngIf="dispatchedOrders.length === 0" class="empty-state">
      <p>No orders are currently being delivered.</p>
    </div>
    
    <!-- Order cards -->
    <div class="order-card" *ngFor="let order of dispatchedOrders">
      <p><strong>Order ID:</strong> {{ order.id }}</p>
      <p><strong>Tracking #:</strong> {{ order.tracking_num }}</p>
      <p><strong>Customer ID:</strong> {{ order.customer_id }}</p>
      <p *ngIf="order.customer_name"><strong>Customer:</strong> {{ order.customer_name }}</p>
      <p><strong>Products:</strong> {{ getProductNames(order.products) }}</p>
      <p><strong>Status:</strong> {{ order.state }}</p>
      <p><strong>Destination:</strong> {{ order.destination_latitude.toFixed(4) }}, {{ order.destination_longitude.toFixed(4) }}</p>
      <p *ngIf="order.drone_id"><strong>Drone ID:</strong> {{ order.drone_id }}</p>
      <div class="order-actions">
        <button (click)="trackOrder(order.id)" class="track-btn">Track Delivery</button>
      </div>
    </div>
  </div>
  
  <!-- Back button -->
  <div class="back-button">
    <button (click)="goBack()">Back to Dashboard</button>
  </div>
</div>